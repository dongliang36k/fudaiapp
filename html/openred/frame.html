<!DOCTYPE html>
  <html>
  <head>
      <meta charset="utf-8">
      <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
      <title>title</title>
      <script type="text/javascript" src="../../script/rem.js"></script>
      <link rel="stylesheet" type="text/css" href="../../css/api.css"/>
      <style>
          header {
              display: block;
              text-align: center;
              background-image: linear-gradient(-180deg, #FF9E9E 0%, #F17475 100%);
              color: #fff;
              height: 2.78rem;
              position: relative;
              line-height: 2.78rem;
          }
          .head i{
            display:inline-block;
            position: absolute;
            font-size: .96rem;
            left: .8rem;
          }
      </style>
  </head>
  <body>
        <header class="head">
          <i id="back" class="iconfont" onclick="goBack()"></i>
          红包信息
        </header>
  </body>
  <script type="text/javascript" src="../../script/api.js"></script>
  <script type="text/javascript">
      var isBack = false;

      apiready = function(){
        api.addEventListener({
            name: 'keyback'
        }, function(ret, err) {
            goBack();
        });

        if(api.pageParam.isFirst){
          setTimeout(()=>{
            setTitle();
          },1000)
        }else {
          $api.addCls($api.byId('back'), 'icon-back');
          isBack=true;
        }
        $api.fixStatusBar($api.dom('header'));
         api.openFrame({
             name: 'myred',
             url: './index.html',
             rect: {
                 x: 0,
                 y: $api.dom('header').offsetHeight,
                 w: api.winWidth,
                 h: api.winHeight-$api.dom('header').offsetHeight,
             },
             bounces: false,
             pageParam:{
               id:api.pageParam.id,
             }
         });

      };
      function goBack(){
        if(isBack){
          api.historyBack({
          },function(ret,err){
              if(!ret.status){
                  api.closeWin();
              }
          });
          api.setWinAttr({
              slidBackEnabled: true,
          });

        }else {
          api.toast({
              msg: '红包不易，请观看5秒钟',
              duration: 2000,
              location: 'bottom'
          });
        }

      }
      function setTitle(){
        var back = $api.byId('back');
        var num = 5;
        setInterval(()=>{
          if(num<=0){
            $api.addCls(back, 'icon-back');
            $api.text(back, '');
            isBack=true;
          }else {
            $api.text(back, num);
            num--;
          }
        },1000)
      }
  </script>
  </html>
